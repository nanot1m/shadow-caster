(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))y(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&y(g)}).observe(document,{childList:!0,subtree:!0});function h(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function y(i){if(i.ep)return;i.ep=!0;const r=h(i);fetch(i.href,r)}})();const d=16,A=20,M=20;function J(n,f,h){const y=n.getContext("2d"),i=window.devicePixelRatio||1;n.width=f*i,n.height=h*i,n.style.width=`${f}px`,n.style.height=`${h}px`,y.scale(i,i)}function Q(n,f){return{edgeIds:[0,0,0,0],existEdges:[!1,!1,!1,!1],x:n,y:f}}const C=0,w=1,T=2,S=3;function V(n){J(n,d*A,d*M);let f=!1,h=!1,y=null,i=performance.now(),r=0,g=0;const s=n.getContext("2d"),{hasCell:u,getCell:x,setCell:p,getAllCells:v}=k(),{getEdge:m,addEdge:I,getAllEdges:P,clearEdges:F}=ee(),E=[];for(let e=0;e<A;e++)p(e,0,!0),p(e,M-1,!0);for(let e=0;e<M;e++)p(0,e,!0),p(A-1,e,!0);O(),q(performance.now());function O(){F();for(let e=0;e<A;e++)for(let o=0;o<M;o++){const l=x(e,o);if(l){if(u(e,o-1))l.existEdges[C]=!1,l.edgeIds[C]=0;else{l.existEdges[C]=!0;const c=x(e-1,o);if(c&&c.existEdges[C]){const t=c.edgeIds[C],a=m(t);l.edgeIds[C]=t,a.ex=e+1}else{const t=I({sx:e,sy:o,ex:e+1,ey:o});l.edgeIds[C]=t}}if(u(e+1,o))l.existEdges[w]=!1,l.edgeIds[w]=0;else{l.existEdges[w]=!0;const c=x(e,o-1);if(c&&c.existEdges[w]){const t=c.edgeIds[w],a=m(t);l.edgeIds[w]=t,a.ey=o+1}else{const t=I({sx:e+1,sy:o,ex:e+1,ey:o+1});l.edgeIds[w]=t}}if(u(e,o+1))l.existEdges[T]=!1,l.edgeIds[T]=0;else{l.existEdges[T]=!0;const c=x(e-1,o);if(c&&c.existEdges[T]){const t=c.edgeIds[T],a=m(t);l.edgeIds[T]=t,a.ex=e+1}else{const t=I({sx:e,sy:o+1,ex:e+1,ey:o+1});l.edgeIds[T]=t}}if(u(e-1,o))l.existEdges[S]=!1,l.edgeIds[S]=0;else{l.existEdges[S]=!0;const c=x(e,o-1);if(c&&c.existEdges[S]){const t=c.edgeIds[S],a=m(t);l.edgeIds[S]=t,a.ey=o+1}else{const t=I({sx:e,sy:o,ex:e,ey:o+1});l.edgeIds[S]=t}}}}}function U(){if(E.length=0,!y)return;const e=new Set,o=P(),[l,c]=y;for(const t of o){const a=t.sx*d,R=t.sy*d,N=t.ex*d,_=t.ey*d;for(let L=0;L<2;L++){let b=L===0?a:N,$=L===0?R:_;const H=`${b},${$}`;if(!e.has(H)){e.add(H);const z=Math.atan2($-c,b-l);for(let X=0;X<3;X++){const Y=z+(X-1)*1e-4;b=l+Math.cos(Y)*A*d*1.5,$=c+Math.sin(Y)*M*d*1.5;const G={sx:l,sy:c,ex:b,ey:$,angle:Y};E.push(G)}}}}for(const t of E)for(const a of o){const R=te(t.sx,t.sy,t.ex,t.ey,a.sx*d,a.sy*d,a.ex*d,a.ey*d);if(R){const{x:N,y:_}=R,L=(N-l)**2+(_-c)**2,b=(t.ex-l)**2+(t.ey-c)**2;L<b&&(t.ex=N,t.ey=_)}}E.sort((t,a)=>t.angle-a.angle)}n.addEventListener("mousemove",e=>{const{offsetX:o,offsetY:l}=e;y=[o,l];const c=Math.floor(o/d),t=Math.floor(l/d);f&&(p(c,t,!0),O()),h&&(p(c,t,!1),O()),U()}),n.addEventListener("mouseleave",()=>{y=null}),n.addEventListener("mousedown",e=>{const{offsetX:o,offsetY:l}=e,c=Math.floor(o/d),t=Math.floor(l/d);if(e.button===2)return;const a=u(c,t);h=a,f=!a,p(c,t,!u(c,t)),O()}),window.addEventListener("mouseup",()=>{h=!1,f=!1});function q(e){D(),r=performance.now()-e,g=1e3/(e-i),i=e,requestAnimationFrame(q)}function D(){s.clearRect(0,0,n.width,n.height),W(),B(),j(),Z(),K()}function K(){s.fillStyle="white",s.globalAlpha=1,s.fillText(`RT: ${r.toFixed(2)}ms; RC: ${E.length}; FPS: ${g.toFixed(0)}`,10,10,200)}function W(){for(const{x:e,y:o}of v())s.fillStyle="#4c6ef5",s.globalAlpha=1,s.fillRect(e*d,o*d,d,d)}function B(){s.globalAlpha=1,s.fillStyle="red",s.strokeStyle="#ffe066",s.lineWidth=1;for(const{sx:e,sy:o,ex:l,ey:c}of P())s.beginPath(),s.moveTo(e*d,o*d),s.lineTo(l*d,c*d),s.stroke()}function Z(){if(!y)return;const[e,o]=y;s.fillStyle="white",s.globalAlpha=1,s.beginPath(),s.arc(e,o,d/4,0,Math.PI*2),s.fill()}function j(){if(!(E.length<1)){s.fillStyle="white",s.globalAlpha=1,s.beginPath(),s.moveTo(E[0].ex,E[0].ey);for(let e=1;e<E.length;e++)s.lineTo(E[e].ex,E[e].ey);s.closePath(),s.fill()}}}function k(){const n=new Map;function f(r,g){var s;return((s=n.get(r))==null?void 0:s.has(g))??!1}function h(r,g){var s;return(s=n.get(r))==null?void 0:s.get(g)}function y(r,g,s){var u,x;s?(n.has(r)||n.set(r,new Map),(u=n.get(r))==null||u.set(g,Q(r,g))):(x=n.get(r))==null||x.delete(g)}function i(){const r=[];for(const g of n.values())for(const s of g.values())r.push(s);return r}return{hasCell:f,getCell:h,setCell:y,getAllCells:i}}function ee(){const n=new Map;let f=1;function h(){return f++}function y(u){return n.get(u)}function i(u){const x=h();return n.set(x,u),x}function r(u){return n.has(u)}function g(){return Array.from(n.values())}function s(){n.clear(),f=1}return{getEdge:y,addEdge:i,hasEdge:r,clearEdges:s,getAllEdges:g}}function te(n,f,h,y,i,r,g,s){const u=h-n,x=y-f,p=g-i,v=s-r,m=(-x*(n-i)+u*(f-r))/(-p*x+u*v),I=(p*(f-r)-v*(n-i))/(-p*x+u*v);if(m>=0&&m<=1&&I>=0&&I<=1){const P=n+I*u,F=f+I*x;return{x:P,y:F}}return null}document.querySelector("#app").innerHTML=`
  <canvas id="canvas"></canvas>
`;V(document.querySelector("#canvas"));
